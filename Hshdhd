-- LocalScript (đặt trong StarterPlayerScripts hoặc StarterGui)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")

local player = Players.LocalPlayer
local guiParent = player:WaitForChild("PlayerGui")

local COUNTDOWN_TIME = 40 -- giây

-- Tạo ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "SpeedHubBypassGui"
screenGui.ResetOnSpawn = false
screenGui.Parent = guiParent

-- Panel chính
local frame = Instance.new("Frame")
frame.Name = "Panel"
frame.Size = UDim2.new(0, 340, 0, 120)
frame.Position = UDim2.new(0.5, -170, 0.15, 0)
frame.AnchorPoint = Vector2.new(0.5, 0)
frame.BackgroundColor3 = Color3.fromRGB(28,28,28)
frame.BorderSizePixel = 0
frame.Parent = screenGui

-- Title text: Bypass Key - SpeedHub
local title = Instance.new("TextLabel")
title.Name = "Title"
title.Size = UDim2.new(1, -20, 0, 36)
title.Position = UDim2.new(0, 10, 0, 8)
title.BackgroundTransparency = 1
title.Text = "Bypass Key — SpeedHub"
title.TextColor3 = Color3.fromRGB(255,255,255)
title.Font = Enum.Font.GothamBold
title.TextSize = 20
title.TextXAlignment = Enum.TextXAlignment.Left
title.Parent = frame

-- Countdown label
local countdownLabel = Instance.new("TextLabel")
countdownLabel.Name = "Countdown"
countdownLabel.Size = UDim2.new(1, -20, 0, 28)
countdownLabel.Position = UDim2.new(0, 10, 0, 48)
countdownLabel.BackgroundTransparency = 1
countdownLabel.Text = "Thời gian: " .. tostring(COUNTDOWN_TIME) .. "s"
countdownLabel.TextColor3 = Color3.fromRGB(220,220,220)
countdownLabel.Font = Enum.Font.Gotham
countdownLabel.TextSize = 18
countdownLabel.TextXAlignment = Enum.TextXAlignment.Left
countdownLabel.Parent = frame

-- Progress bar background
local progressBg = Instance.new("Frame")
progressBg.Name = "ProgressBG"
progressBg.Size = UDim2.new(1, -20, 0, 16)
progressBg.Position = UDim2.new(0, 10, 0, 84)
progressBg.BackgroundColor3 = Color3.fromRGB(60,60,60)
progressBg.BorderSizePixel = 0
progressBg.Parent = frame

-- Progress fill (bắt đầu đầy)
local progressFill = Instance.new("Frame")
progressFill.Name = "ProgressFill"
progressFill.Size = UDim2.new(1, 0, 1, 0)
progressFill.Position = UDim2.new(0, 0, 0, 0)
progressFill.BackgroundColor3 = Color3.fromRGB(100,200,255)
progressFill.BorderSizePixel = 0
progressFill.Parent = progressBg

-- Countdown logic
local startTime = tick()
local ended = false

-- Tạo tween để giảm chiều rộng thanh tiến trình trong COUNTDOWN_TIME
local goal = {Size = UDim2.new(0, 0, 1, 0)}
local tweenInfo = TweenInfo.new(COUNTDOWN_TIME, Enum.EasingStyle.Linear, Enum.EasingDirection.Out)
local progressTween = TweenService:Create(progressFill, tweenInfo, goal)
progressTween:Play()

local conn
conn = RunService.RenderStepped:Connect(function()
    local elapsed = tick() - startTime
    local remain = math.max(0, COUNTDOWN_TIME - elapsed)
    countdownLabel.Text = string.format("Thời gian: %d s", math.ceil(remain)) -- show integer seconds

    if remain <= 0 and not ended then
        ended = true
        -- Khi hết thời gian: đổi text, dừng tween, sau đó xóa GUI nhẹ nhàng
        countdownLabel.Text = "Hết thời gian"
        -- nhỏ hiệu ứng fade
        local fade = TweenService:Create(frame, TweenInfo.new(0.5), {BackgroundTransparency = 1})
        fade:Play()
        fade.Completed:Wait()
        if conn and conn.Connected then conn:Disconnect() end
        screenGui:Destroy()
    end
end)
  
